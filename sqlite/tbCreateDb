-- sqlite
DROP TABLE IF EXISTS DAY_TB;
DROP TABLE IF EXISTS PERIOD_TB;
DROP TABLE IF EXISTS BRANCH_TB;
DROP TABLE IF EXISTS YEAR_TB;
DROP TABLE IF EXISTS GRADE_TB;
DROP TABLE IF EXISTS TEACHER_TB;
DROP TABLE IF EXISTS SUBJECT_TB;
DROP TABLE IF EXISTS TIMETABLE_TB;
--DROP TABLE IF EXISTS USER_TB;   -- REMOVE OR COMMENT OUT BEFORE LAUNCH
--DROP TABLE IF EXISTS ATTEND_TB; -- REMOVE OR COMMENT OUT BEFORE LAUNCH
--DROP TABLE IF EXISTS TCHUSR_TB; -- REMOVE OR COMMENT OUT BEFORE LAUNCH

CREATE TABLE DAY_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    day TEXT UNIQUE
);

CREATE TABLE PERIOD_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    period TEXT UNIQUE
);

CREATE TABLE BRANCH_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    branch TEXT UNIQUE
);

CREATE TABLE YEAR_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    year INTEGER UNIQUE
);

CREATE TABLE GRADE_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    grade TEXT UNIQUE,
    branch_id INTEGER,
    year_id INTEGER
);

CREATE TABLE TEACHER_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    tech_name TEXT UNIQUE,
    emp_id TEXT UNIQUE
);

CREATE TABLE SUBJECT_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    subject TEXT,
    grade_id INTEGER,
    teacher_id INTEGER,
    UNIQUE (subject,grade_id,teacher_id)
);

CREATE TABLE IF NOT EXISTS TIMETABLE_TB(
    day_id INTEGER,
    period_id INTEGER,
    subject_id INTEGER,
    PRIMARY KEY (day_id,period_id,subject_id)
);

CREATE TABLE IF NOT EXISTS USER_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    chat_id TEXT UNIQUE,
    roll_no TEXT UNIQUE,
    grade_id INTEGER 
);

CREATE TABLE IF NOT EXISTS ATTEND_TB(

    chat_id INTEGER,
    subject_id INTEGER,
    attend_pcls INTEGER,
    attend_tcls INTEGER,
    PRIMARY KEY (chat_id,subject_id)
);

CREATE TABLE IF NOT EXISTS TCHUSR_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    chat_id TEXT UNIQUE,
    emp_id TEXT UNIQUE
);

CREATE TABLE IF NOT EXISTS CR_TB(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
    grade_id INTEGER NOT NULL,
    roll_no TEXT UNIQUE
);